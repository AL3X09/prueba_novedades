<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reporte Novedades</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

</head>

<body>
  <div class="container">
    <!-- Content here -->
    <h1>Generador de Reporte Novedades</h1>
    <form id="formNovedades">
      <div class="mb-12">
        <label for="fechaInicioInput" class="form-label">Fecha de diligenciamiento del formulario</label>
        <input type="text" class="form-control" id="fechaInicio" name="fechaInicio" aria-describedby="fechaInicioHelp"
          requiered disabled>
        <div id="fechaInicioHelp" class="form-text">Campo automatico no se diligencia</div>
      </div>
      <div class="mb-12">
        <label for="procesoInput" class="form-label">*Porceso</label>
        <select class="form-select" aria-label="Default select example">
          <option selected>Open this select menu</option>
          <option value="1">One</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
        </select>

      </div>
      <div class="mb-12">
        <label for="servicioInput" class="form-label">Servicio/Subprocesos</label>
        <select class="form-select" aria-label="Default select example" id="fechaInicio">
          <option selected>Open this select menu</option>
          <option value="1">One</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
        </select>

      </div>
      <div class="mb-12">
        <label for="nombreInput" class="form-label">Nombres completos</label>
        <input type="text" class="form-control" id="nombres" aria-describedby="nombresHelp" requiered>
        <div id="nombresHelp" class="form-text">Campo automatico no se diligencia</div>
      </div>
      <div class="mb-12">
        <label for="apellidoInput" class="form-label">Apellidos</label>
        <input type="text" class="form-control" id="apellido" aria-describedby="apellidoHelp" requiered>
        <div id="apellidoHelp" class="form-text">Campo automatico no se diligencia</div>
      </div>
      <div class="mb-12">
        <label for="numDocumentoInput" class="form-label">Numero de documento</label>
        <input type="number" class="form-control" id="numDocumento" aria-describedby="numDocumentoHelp" requiered>
        <div id="numDocumentoHelp" class="form-text">Campo automatico no se diligencia</div>
      </div>
      <div class="mb-12">
        <label for="cargoInput" class="form-label">Cargo</label>
        <input type="text" class="form-control" id="cargo" aria-describedby="cargoHelp" requiered>
        <div id="cargoHelp" class="form-text">Campo automatico no se diligencia</div>
      </div>
      <div class="mb-12">
        <label for="servicioInput" class="form-label">Tipo de Vinculaci√≥n</label>
        <select class="form-select" aria-label="Default select example" id="xxx">
          <option selected>Open this select menu</option>
          <option value="1">One</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
        </select>
      </div>
      <div class="mb-12">
        <label for="servicioInput" class="form-label">Tipo de personal</label>
        <select class="form-select" aria-label="Default select example" id="fechaInicio">
          <option selected>Open this select menu</option>
          <option value="1">One</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
        </select>
      </div>
      <div class="mb-12">
        <label for="servicioInput" class="form-label">tipo de novedad</label>
        <select class="form-select" aria-label="Default select example" id="fechaInicio">
          <option selected>Open this select menu</option>
          <option value="1">One</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
        </select>
      </div>
      <div class="mb-12">
        <label for="servicioInput" class="form-label">Motivo de la novedad</label>
        <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
        <div id="fechaInicioHelp" class="form-text">Campo automatico no se diligencia</div>
      </div>

      <div class="mb-3">
        <label for="exampleInputPassword1" class="form-label">fecha de la novedad</label>
        <input type="date" class="form-control" id="fechaInicio" aria-describedby="fechaInicioHelp" requiered>
      </div>
      <div class="mb-3">
        <label for="exampleInputPassword1" class="form-label">fecha de la novedad</label>
        <input type="time" class="form-control" id="fechaInicio" aria-describedby="fechaInicioHelp" requiered>
      </div>
      <div class="mb-3">
        <label for="exampleInputPassword1" class="form-label">fecha de la novedad</label>
        <input type="time" class="form-control" id="fechaInicio" aria-describedby="fechaInicioHelp" requiered>
      </div>

      <div class="mb-12">
        <label for="servicioInput" class="form-label">6. REQUIERE REEMPLAZO</label>
        <select class="form-select" aria-label="Default select example" id="fechaInicio">
          <option selected>Open this select menu</option>
          <option value="1">One</option>
          <option value="2">Two</option>
        </select>
      </div>
      <div class="mb-12">
        <label for="formFile" class="form-label">Soportes</label>
        <input class="form-control" type="file" id="formFile">
      </div>
      <div class="mb-12">
        <button type="button" id="addItemBtn" class="btn btn-primary">‚ûïAdicionar fechas</button>
      </div>
      <div class="mb-12">
        <button type="button" onclick="enviaran8n()">üöÄ Enviar a n8n</button>
      </div>
    </form>

  </div>
  <h1>Generador de Reporte</h1>

  <form id="dynamicForm">
    <div class="row">
      <label for="report-name">Nombre del Reporte:</label>
      <input type="text" id="report-name" name="reportName" required>
    </div>

    <h2>Items:</h2>
    <div id="item-container">
    </div>

    <button type="button" id="">‚ûï Agregar √çtem</button>
    <hr>
    <button type="submit">üöÄ Enviar a n8n</button>
  </form>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

  <script>
    $('document').ready(function () {

      //console.log("ready!");
      var d = new Date();

      var month = d.getMonth() + 1;
      var day = d.getDate();

      var output = d.getFullYear() + '/' +
        (month < 10 ? '0' : '') + month + '/' +
        (day < 10 ? '0' : '') + day;
      //
      $('#fechaInicio').val(output);

      //$('addItemBtn').click(function () {
        //alert('click');
      //});

    });

    async function enviaran8n() {

      const webhookUrl = 'https://pruebanochon-fdhfbpaehvhmgdbx.chilecentral-01.azurewebsites.net/webhook-test/a5d568d4-e3d7-4af7-a00e-4a7198263d6f'; // ¬°IMPORTANTE! Reemplaza esto con tu URL de Webhook de n8n.


      let form = $('#formNovedaes').serialize();


      $.ajax({
        url: webhookUrl,
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify(form),
        success: function (response) {
          alert('Datos enviados a n8n con √©xito!');
          form.reset();
          itemContainer.innerHTML = ''; // Limpia las filas
          createItemRow(); // Agrega la primera fila nuevamente
        },
        error: function (xhr, status, error) {
          console.error('Error:', error);
          alert('Error al enviar los datos a n8n.');
        }
      });
      
    }

    </script>

</body>

</html>